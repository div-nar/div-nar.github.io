<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>writing - divith narendra</title>
    <meta name="description" content="thoughts on tech, startups, and building things.">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <!-- Header / Name -->
        <header class="header">
            <h1>divith narendra</h1>
            <p class="tagline">thoughts on tech, startups, and building things.</p>
        </header>

        <!-- Navigation -->
        <nav class="nav">
            <a href="index.html" class="nav-item">home</a>
            <span class="nav-separator">/</span>
            <a href="writing.html" class="nav-item">writing</a>
        </nav>

        <!-- Writing Section -->
        <section id="writing" class="section">
            <h2>writing</h2>

            <div id="articles-container">
                <!-- Articles will be loaded here dynamically -->
                <div class="item">
                    <p class="item-description">loading articles...</p>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <p>© 2025 divith narendra</p>
        </footer>
    </div>

    <script>
        // Fetch Substack posts from RSS feed
        async function loadSubstackPosts() {
            const container = document.getElementById('articles-container');

            try {
                // Using rss2json API to convert RSS to JSON
                const response = await fetch('https://api.rss2json.com/v1/api.json?rss_url=https://kwerky.substack.com/feed');
                const data = await response.json();

                if (data.status === 'ok' && data.items && data.items.length > 0) {
                    // Clear loading message
                    container.innerHTML = '';

                    // Display each article
                    data.items.forEach(item => {
                        const articleDiv = document.createElement('div');
                        articleDiv.className = 'item';

                        const title = item.title.toLowerCase();
                        const link = item.link;

                        // Extract a brief description from the content (first 100 chars)
                        const tempDiv = document.createElement('div');
                        tempDiv.innerHTML = item.description || item.content || '';
                        const description = tempDiv.textContent.trim().substring(0, 100) + '...';

                        articleDiv.innerHTML = `
                            <h3><a href="${link}" class="item-link" target="_blank">${title}</a></h3>
                            <p class="item-description">${description}</p>
                        `;

                        container.appendChild(articleDiv);
                    });

                    // Add "all posts" link at the end
                    const allPostsDiv = document.createElement('div');
                    allPostsDiv.className = 'item';
                    allPostsDiv.innerHTML = `
                        <h3><a href="https://kwerky.substack.com/" class="item-link" target="_blank">all posts →</a></h3>
                    `;
                    container.appendChild(allPostsDiv);
                } else {
                    container.innerHTML = '<div class="item"><p class="item-description">unable to load articles. <a href="https://kwerky.substack.com/" class="item-link" target="_blank">visit substack →</a></p></div>';
                }
            } catch (error) {
                console.error('Error loading Substack posts:', error);
                container.innerHTML = '<div class="item"><p class="item-description">unable to load articles. <a href="https://kwerky.substack.com/" class="item-link" target="_blank">visit substack →</a></p></div>';
            }
        }

        // Load posts when page loads
        loadSubstackPosts();
    </script>

</body>

</html>