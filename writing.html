<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Writing — Divith Narendra</title>
    <meta name="description" content="Thoughts on tech, startups, and building things.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Star Field Background -->
    <div class="stars" id="stars"></div>

    <!-- Rocket Timeline -->
    <div class="rocket-trail"></div>
    <div class="rocket" id="rocket">
        <svg viewBox="0 0 24 48" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 0C12 0 6 8 6 20C6 28 8 36 12 44C16 36 18 28 18 20C18 8 12 0 12 0Z" fill="#fafafa" />
            <path d="M12 0C10 4 8 10 8 16L12 12L16 16C16 10 14 4 12 0Z" fill="#d4a574" />
            <path d="M6 32L2 44L6 38V32Z" fill="#d4a574" />
            <path d="M18 32L22 44L18 38V32Z" fill="#d4a574" />
            <circle cx="12" cy="18" r="3" fill="#0a0a0a" stroke="#d4a574" stroke-width="1" />
        </svg>
    </div>

    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>writing</h1>
            <p class="tagline">Thoughts on tech, startups, and building things.</p>

            <nav class="nav">
                <a href="index.html" class="nav-item">← Home</a>
                <span class="nav-separator">·</span>
                <a href="https://kwerky.substack.com/" class="nav-item" target="_blank">Substack</a>
            </nav>
        </header>

        <!-- Writing Section -->
        <section id="writing" class="section">
            <h2>Recent Posts</h2>

            <div id="articles-container">
                <div class="item">
                    <p class="item-description">Loading articles...</p>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <p>© 2025 Divith Narendra</p>
        </footer>
    </div>

    <script>
        async function loadSubstackPosts() {
            const container = document.getElementById('articles-container');

            try {
                const response = await fetch('https://api.rss2json.com/v1/api.json?rss_url=https://kwerky.substack.com/feed');
                const data = await response.json();

                if (data.status === 'ok' && data.items && data.items.length > 0) {
                    container.innerHTML = '';

                    data.items.forEach(item => {
                        const articleDiv = document.createElement('div');
                        articleDiv.className = 'item';

                        const title = item.title;
                        const link = item.link;

                        // Format date
                        const date = new Date(item.pubDate);
                        const formattedDate = date.toLocaleDateString('en-US', {
                            month: 'short',
                            year: 'numeric'
                        });

                        // Extract description
                        const tempDiv = document.createElement('div');
                        tempDiv.innerHTML = item.description || item.content || '';
                        const description = tempDiv.textContent.trim().substring(0, 150) + '...';

                        articleDiv.innerHTML = `
                            <h3><a href="${link}" class="item-link" target="_blank">${title}</a></h3>
                            <div class="item-meta">
                                <span class="item-date">${formattedDate}</span>
                            </div>
                            <p class="item-description">${description}</p>
                        `;

                        container.appendChild(articleDiv);
                    });

                    const allPostsDiv = document.createElement('div');
                    allPostsDiv.className = 'item item--minimal';
                    allPostsDiv.innerHTML = `
                        <h3><a href="https://kwerky.substack.com/" class="item-link" target="_blank">View all posts <span class="arrow">→</span></a></h3>
                    `;
                    container.appendChild(allPostsDiv);
                } else {
                    container.innerHTML = '<div class="item"><p class="item-description">Unable to load articles. <a href="https://kwerky.substack.com/" class="item-link" target="_blank">Visit Substack →</a></p></div>';
                }
            } catch (error) {
                console.error('Error loading Substack posts:', error);
                container.innerHTML = '<div class="item"><p class="item-description">Unable to load articles. <a href="https://kwerky.substack.com/" class="item-link" target="_blank">Visit Substack →</a></p></div>';
            }
        }

        loadSubstackPosts();

        // Star Field Generation
        function createStars() {
            const starsContainer = document.getElementById('stars');
            for (let i = 0; i < 100; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                const sizes = ['star--small', 'star--medium', 'star--large'];
                star.classList.add(sizes[Math.floor(Math.random() * sizes.length)]);
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 4 + 's';
                star.style.animationDuration = (3 + Math.random() * 3) + 's';
                starsContainer.appendChild(star);
            }
        }

        // Rocket Scroll Animation
        function initRocketScroll() {
            const rocket = document.getElementById('rocket');
            if (!rocket) return;
            let lastScrollY = window.scrollY;
            let rocketY = 10;
            window.addEventListener('scroll', () => {
                const currentScrollY = window.scrollY;
                const delta = currentScrollY - lastScrollY;
                rocketY += delta * 0.05;
                rocketY = Math.max(10, Math.min(85, rocketY));
                rocket.style.top = rocketY + '%';
                // Flip rocket based on direction
                rocket.style.transform = delta > 0 ? 'scaleY(-1)' : 'scaleY(1)';
                lastScrollY = currentScrollY;
            });
        }

        createStars();
        initRocketScroll();
    </script>

</body>

</html>