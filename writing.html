<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D. NARENDRA // TRANSMISSION LOG</title>
    <meta name="description" content="Thoughts on tech, startups, and building things.">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="page-wrapper">

        <header>
            <div>
                <h1>TRANSMISSION LOG</h1>
                <div class="dim">THOUGHTS ON TECH // STARTUPS // BUILDING THINGS</div>
            </div>
            <div style="text-align: right;">
                <div><a href="index.html">[ ← BACK_TO_BASE ]</a></div>
                <div><a href="https://kwerky.substack.com/" target="_blank">[ SUBSTACK_FEED ]</a></div>
            </div>
        </header>

        <div class="writing-grid">

            <div style="margin-bottom: 20px;">
                <h3 class="typing-cursor">SIGNAL INTERCEPTS // RECENT POSTS</h3>
            </div>

            <div class="article-list" id="articles-container">
                <div class="article-item">
                    <div>
                        <div class="article-title">LOADING_TRANSMISSIONS...</div>
                    </div>
                </div>
            </div>

        </div>

        <footer class="footer">
            <p>// DIVITH NARENDRA // SYSTEM STATUS: ONLINE // 2025 //</p>
        </footer>

    </div>

    <script>
        async function loadSubstackPosts() {
            const container = document.getElementById('articles-container');

            try {
                const response = await fetch('https://api.rss2json.com/v1/api.json?rss_url=https://kwerky.substack.com/feed');
                const data = await response.json();

                if (data.status === 'ok' && data.items && data.items.length > 0) {
                    container.innerHTML = '';

                    data.items.forEach(item => {
                        const a = document.createElement('a');
                        a.className = 'article-link';
                        a.href = item.link;
                        a.target = '_blank';

                        const date = new Date(item.pubDate);
                        const formattedDate = date.toLocaleDateString('en-US', {
                            month: 'short',
                            year: 'numeric'
                        }).toUpperCase();

                        const tempDiv = document.createElement('div');
                        tempDiv.innerHTML = item.description || item.content || '';
                        const description = tempDiv.textContent.trim().substring(0, 120) + '...';

                        a.innerHTML = `
                            <div class="article-item">
                                <div>
                                    <div class="article-title">${item.title.toUpperCase()}</div>
                                    <div class="article-desc">${description}</div>
                                </div>
                                <div class="article-date">${formattedDate}</div>
                            </div>
                        `;

                        container.appendChild(a);
                    });

                    const allPostsLink = document.createElement('a');
                    allPostsLink.className = 'article-link';
                    allPostsLink.href = 'https://kwerky.substack.com/';
                    allPostsLink.target = '_blank';
                    allPostsLink.innerHTML = `
                        <div class="article-item">
                            <div class="article-title">[ VIEW ALL TRANSMISSIONS → ]</div>
                        </div>
                    `;
                    container.appendChild(allPostsLink);

                } else {
                    container.innerHTML = `
                        <a class="article-link" href="https://kwerky.substack.com/" target="_blank">
                            <div class="article-item">
                                <div class="article-title">[ SUBSTACK_DIRECT_LINK → ]</div>
                                <div class="article-desc">Unable to load feed. Visit Substack directly.</div>
                            </div>
                        </a>
                    `;
                }
            } catch (error) {
                console.error('Error loading Substack posts:', error);
                container.innerHTML = `
                    <a class="article-link" href="https://kwerky.substack.com/" target="_blank">
                        <div class="article-item">
                            <div class="article-title">[ SUBSTACK_DIRECT_LINK → ]</div>
                            <div class="article-desc">Unable to load feed. Visit Substack directly.</div>
                        </div>
                    </a>
                `;
            }
        }

        loadSubstackPosts();
    </script>
</body>

</html>
